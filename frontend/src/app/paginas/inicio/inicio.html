<div class="layout">

  <!-- OVERLAY MÓVIL (para cerrar el sidebar tocando fuera) -->
  <div
    class="mobile-overlay"
    [class.show]="sidebarOpen"
    (click)="closeSidebar()">
  </div>

  <!-- SIDEBAR -->
  <aside
    class="sidebar"
    [class.collapsed]="sidebarCollapsed"
    [class.show]="sidebarOpen">

    <!-- LOGO -->
    <div class="sidebar-logo">
      <img
        src="/logo-rtv.png"
        alt="Logo RTV"
        class="logo"
      />
      <span *ngIf="!sidebarCollapsed">RTV</span>
    </div>

    <!-- MENÚ DE NAVEGACIÓN -->
    <nav class="menu">

      <!-- Dashboard -->
      <div class="menu-item">
        <mat-icon class="menu-icon">dashboard</mat-icon>
        <span *ngIf="!sidebarCollapsed">Dashboard</span>
      </div>


      <!-- SECCIÓN: Gestión Vehicular -->
      <div class="menu-section">
        <span *ngIf="!sidebarCollapsed" class="section-title">
          Gestión Vehicular
        </span>

        <div class="menu-item">
          <mat-icon class="menu-icon">directions_car</mat-icon>
          <span *ngIf="!sidebarCollapsed">Vehículos</span>
        </div>

        <div class="menu-item">
          <mat-icon class="menu-icon">assignment</mat-icon>
          <span *ngIf="!sidebarCollapsed">Revisiones</span>
        </div>

        <div class="menu-item">
          <mat-icon class="menu-icon">fact_check</mat-icon>
          <span *ngIf="!sidebarCollapsed">Resultados de Revisión</span>
        </div>

      </div>

      <!-- SECCIÓN: Administración -->
      <div class="menu-section">
        <span *ngIf="!sidebarCollapsed" class="section-title">
          Administración
        </span>

        <div class="menu-item">
          <mat-icon class="menu-icon">build</mat-icon>
          <span *ngIf="!sidebarCollapsed">Equipos</span>
        </div>

        <div class="menu-item">
          <mat-icon class="menu-icon">payments</mat-icon>
          <span *ngIf="!sidebarCollapsed">Pagos</span>
        </div>

        <div class="menu-item">
          <mat-icon class="menu-icon">verified</mat-icon>
          <span *ngIf="!sidebarCollapsed">Certificados</span>
        </div>






        <!-- Item Administración con submenú -->
        <div class="menu-item-expandable">
          <div
            class="menu-item"
            (click)="toggleAdminMenu()"
            [class.active]="adminMenuOpen">

            <mat-icon class="menu-icon">group</mat-icon>
            <span *ngIf="!sidebarCollapsed">Administración</span>

            <mat-icon
              *ngIf="!sidebarCollapsed"
              class="menu-arrow"
              [class.rotated]="adminMenuOpen">
              expand_more
            </mat-icon>
          </div>


          <!-- Submenú -->
          <div
            class="submenu"
            [class.open]="adminMenuOpen && !sidebarCollapsed">
            <a routerLink="/inicio/administracion/usuarios" class="submenu-item">Usuarios</a>
            <a routerLink="/inicio/administracion/roles" class="submenu-item">Roles</a>
            <a routerLink="/inicio/administracion/areas" class="submenu-item">Áreas</a>
            <a routerLink="/inicio/administracion/empresa" class="submenu-item">Empresa</a>
          </div>
        </div>



        <div class="menu-item">
          <mat-icon class="menu-icon">settings</mat-icon>
          <span *ngIf="!sidebarCollapsed">Configuración</span>
        </div>

      </div>

    </nav>
  </aside>

  <!-- CONTENIDO PRINCIPAL -->
  <div class="main">

    <!-- HEADER -->
    <header class="header">

      <div class="left">
        <button class="hamburger" (click)="toggleSidebar()">
          <mat-icon>menu</mat-icon>
        </button>


        <img
          src="/logo-rtv.png"
          alt=""
          class="header-logo"
        />
        <span class="title">Revisión Técnica Vehicular</span>
      </div>

      <div class="right">
        <!-- Información de usuario -->
        <mat-icon class="user-icon">person</mat-icon>
        <span class="user">{{ nombreUsuario }}</span>


        <!-- Botón de cerrar sesión (solo visual por ahora) -->
        <button class="logout" (click)="cerrarSesion()">
          <mat-icon>logout</mat-icon>
          <span>Salir</span>
        </button>
      </div>

    </header>

    <!-- CONTENIDO DINÁMICO -->
    <main class="content">
      <router-outlet></router-outlet>
    </main>

  </div>

</div>
